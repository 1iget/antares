#/bin/bash
#helper methods for generating .kcnf / .mk pairs

gen_test()
{
get_mcu_list| while read lnn; do
echo $lnn
done

}


gen_mka()
{
echo "# Automatically generated. Not recommended to edit"
while read lnn; do
for ln in $lnn; do
up=`echo $ln | tr [:lower:] [:upper:]`
echo "ifeq (\$(CONFIG_$1_$up),y)"
echo "$1+=$ln"
echo "endif"
done
done
}

gen_mk()
{
echo "# Automatically generated. Not recommended to edit"
while read lnn; do
for ln in $lnn; do
up=`echo $ln | tr [:lower:] [:upper:]`
echo "ifeq (\$(CONFIG_$1_$up),y)"
echo "$1=$ln" 
echo "endif" 
done
done
}

gen_kcnf()
{
#1st pass, gen the kcnf selection menu
echo "# Automatically generated. Not recommended to edit" 
#echo "choice" >> mcu_selection.kcnf
#echo "prompt \"Select MCU variant\"" >> mcu_selection.kcnf
while read lnn; do
for ln in $lnn; do
up=`echo $ln | tr [:lower:] [:upper:]`
echo "config $1_$up" 
echo "bool \"$ln\"" 
done
done
}

gen_$2 $1
