What you'll need 
-----------------

To set up antares you'll need:
* A PC running GNU/Linux or FreeBSD
* A cross compiler for the target platform(s)
* git
* make, gcc
* flex, bison, gperf
* A bit of free time.

Preparations
-------------

First, we need to install dependencies. With 99% probability they are in your
distribution repositories. 
For Debian and Ubuntu just type in:

sudo apt-get install build-essential git flex bison gperf

In Arch Linux type this: 

sudo pacman -S git flex bison gperf


Setup
------

First, we need to clone antares to your local drive. 
In this examples, we'll use ~/.antares

git clone git://github.com/nekromant/antares.git ~/.antares

Once done, we'll need to install aproj script to the system. It is required
to bootstrap projects based on templates.
To do so, cd to ~/.antares/abootstrap
and run 

sudo make install

Or just copy aproj somewhere, where it will be in your $PATH. It's just a small
bash script. 
Finally, we need to tell the scripts where to find the global antares installation.  antares, so they won't try to checkout the git every time.
To do so, we need to set environment variable ANTARES_INSTALL_DIR. 
In most cases you'll need to add something like that tou your ~/.bashrc

export ANTARES_INSTALL_DIR=~/.antares

Project examples
----------------

aproj script works with project examples stored in ~/.antares_examples. You can add your own examples there. To get and update project examples type:

aproj update 


Bootstrapping a project
------------------------

Create a directory for your project. e.g., myfirmware

$ mkdir myfirmware
$ cd myfirmware
$ aproj

Pick an example project you want to start with
1) ./msp430/launchpad         5) ./8051/stc/urpc_demo
2) ./msp430/msp-exp430fr5739  6) ./8051/stc/blink
3) ./avr/uisp-app             7) ./8051/at89c5113-blinky
4) ./avr/2313-blinky
#? 3
Initialized empty Git repository in /tmp/a/.git/
Template installed, repo created. Please do the initial git commit now

This will copy a few files to this directory, init a git repo there, add a few files to the first commit and run make for the first time to symlink antares here. 
You can make initial commit now.
If it starts to clone antares instead - something is wrong with your 
ANTARES_INSTALL_DIR environment variable. Double check that.

Once done, you have a few targets for make.

$ make menuconfig - will bring up menuconfig. 

$ make build - will build the project for you. 

$ make clean - cleans the build files

$ make mrproper - a full purge of all build and temporary files (.config remains intact). 

You can set default make and make deploy targets in 'Build system tweaks' in menuconfig

Project structure
------------------

Source code can be found in src/
Binary files reside in images/
In deploy/ directory you can add your own deplou methods, specific to your project
See deploy.txt for details
temporary files and autogenerated stuff go to tmp/
Kconfig files are named 'kcnf' here. I'm too lazy t в дереве проекта. 
Вы можете подключать к нему другие kcnf файлы, располагая их как удобно. 
Конфигурация проекта сохраняется в файле .config


Заметка для мейнтейнеров дистрибутивов
---------------------------------------

Если Вы хотите добавить antares в виде пакета - это не очень хорошая идея. 
Максимум - можно "опакетить" скрипт aproj. В случае появления кода, который 
хотелось бы использовать между проектами его необходимо будет внести в дерево 
antares, соответственно у пользователя должны быть права на запись в каталог antares. 
Как вариант - установка в /usr/src


Проблемы и решения
------------------

Q: aproj не может отклонировать репозиторий. С такой ошибкой. Что делать?
---  
It looks like the examples repository hasn't been downloaded yet.
Do you want me to clone the examples repository? [y/n]
yCloning into /home/drakmail/.antares_examples...
error: error setting certificate verify locations:
 CAfile: /etc/ssl/certs/ca-certificates.crt
 CApath: none while accessing https://github.com/nekromant/antares-examples.git/info/refs
fatal: HTTP request failed
Pulling new examples (if any) from git
/usr/local/bin/aproj: line 19: cd: /home/drakmail/.antares_examples: Нет такого файла или каталога
/usr/local/bin/aproj: line 23: cd: /home/drakmail/.antares_examples: Нет такого файла или каталога
---

A: Проблема с Вашими настройками git'a. Как временное решение можно сделать так:
GIT_SSL_NO_VERIFY=true /usr/local/bin/aproj update 
